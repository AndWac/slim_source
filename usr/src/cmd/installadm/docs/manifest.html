<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>How to Administer the Manifest Files for an Install Service - OpenSolaris 2009.06 Automated Installer Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/opensol.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.com"><img border="0" src="graphics/opensolaris_logo_trans.png"></img></a>
   </div>
   <div class="Title">OpenSolaris 2009.06 Automated Installer Guide</div>
</div>
<div class="headerbar"></div>


<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="enable.html">Previous</a>
             </td>
             <td align="right">
                 <a href="associate.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="index.html">1.&nbsp;&nbsp;Introduction to the Automated Installer</a></p>
<p class="toc level1 tocsp"><a href="setup.html">2.&nbsp;&nbsp;Automated Installer Setup Instructions</a></p>
<p class="toc level1 tocsp"><a href="administer.html">3.&nbsp;&nbsp;How to Administer an Automated Install Server</a></p>
<p class="toc level2"><a href="add.html">How to Add Install Services</a></p>
<p class="toc level2"><a href="service.html">Scenario: Setting Up a Server and Multiple Clients</a></p>
<p class="toc level2"><a href="copying.html">Scenario: Copying a Service to Another Location</a></p>
<p class="toc level2"><a href="delete.html">How to Delete Install Services</a></p>
<p class="toc level2"><a href="list.html">How to List Install Services on the Server</a></p>
<p class="toc level2"><a href="enable.html">How to Enable and Disable Install Services</a></p>
<div class="onpage">
<p class="toc level2"><a href="">How to Administer the Manifest Files for an Install Service</a></p>
</div>
<p class="toc level2"><a href="associate.html">How to Add an AI Manifest File to a Service</a></p>
<p class="toc level2"><a href="remove.html">How to Remove an AI Manifest File From a Service</a></p>
<p class="toc level2"><a href="clientsetup.html">How to Administer an Automated Install Client</a></p>
<p class="toc level2"><a href="scenario.html">Scenario: Creating a Custom Client</a></p>
<p class="toc level1 tocsp"><a href="trouble.html">4.&nbsp;&nbsp;Troubleshooting/FAQ for the Automated Installer</a></p>
<p class="toc level1 tocsp"><a href="appendix.html">5.&nbsp;&nbsp;Appendix</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="manifest"></a><h3>How to Administer the Manifest Files for an Install Service</h3>
<p>You can customize your automated installations by copying the default manifest files that
are included in the automated installer package and editing the copies to create
new, custom manifest files. You can customize manifest files in order to create
a new set of blueprints for installation specifications that will match the machine
parameters of some of your client systems.</p><p>Once you have created a custom set of manifest files, you can
add these file to a service. Then, when a client browses the available
service, seeking manifest files where the criteria in the manifest files match the
parameters of that client system, the client will find your custom manifest files.
When this match is found, the installation is performed on the client system.</p>

<a name="kinds"></a><h4>3 Kinds of Manifest Files</h4>
<p>In the automated installer application, three kinds of manifest files are provided in
each service; <b>AI manifest files</b>, <b>SC manifest files</b>, and <b>criteria manifest files</b>. These manifest files are XML files
that provide specifications for client installation.</p>
<ul><li><p>The <b>AI manifest file</b> is a blueprint that provides the configuration source and the service properties for an automated installation service. Some of the parameters defined by the AI manifest file are disk target, disk partitions, and IPS repository.</p></li>
<li><p>The <b>SC manifest file</b> provides system configuration specifications for the installed image. Some of the configuration parameters supported are timezone, root password, and adding a username and password to the installed system.</p></li>
<li><p> The <b>criteria manifest file</b> is the bridge that connects the AI manifest file and the SC manifest file with a client. The administrator uses the criteria manifest file to add an AI manifest to a service. The client sends its hardware characteristics to the install service and gets a manifest file that was assigned by the administrator.</p></li></ul>


<a name="customfiles"></a><h4>How to Customize Manifest Files</h4>
<p>Default manifest files are included when you create an OSInstall service by using
the <tt>installadm create-service</tt> utility. You can create additional manifest files by copying, renaming, and
customizing an existing manifest file.</p><p><b>Use the following procedure to customize your manifest files.</b></p>
<ol><li><p>Create a custom AI manifest file.</p></li>
<li><p> Create a custom SC manifest file.</p></li>
<li><p>Create a custom criteria manifest file based on the client criteria. The location of the AI manifest file and the location of the SC manifest file are specified inside the criteria manifest file.</p></li>
<li><p>Associate the new criteria manifest file with an existing service by using the <tt>installadm add</tt> utility. Add the criteria manifest to the install service by executing the following command:</p><pre><tt>installadm add <tt>-M</tt> <i>manifest</i> <tt>-n</tt> <i>svcname</i></tt></pre></li></ol>
<p>The following sections provide specific examples for each step in this process.</p>

<a name="customai"></a><h4>Create Custom AI Manifest Files</h4>
<p>After you have created a service, you can edit the default AI
manifest files associated with that service to customize the properties of an installed client.
Include the parameters that you need and omit parameters that are not needed
for your custom file. See the following examples.</p><h6>Example&nbsp;3-1 AI Manifest With All Fields Defined</h6><pre>&lt;ai_manifest name="example_with_all_defined">
     &lt;ai_target_device>
         &lt;target_device_name>c0t0d0&lt;/target_device_name> 
         &lt;target_device_type>SCSI&lt;/target_device_type> 
         &lt;target_device_vendor>toshiba&lt;/target_device_vendor> 
         &lt;target_device_size>20480&lt;/target_device_size>
         &lt;target_device_use_solaris_partition>true&lt;/target_device_use_solaris_partition>
     &lt;/ai_target_device>
     &lt;ai_device_partitioning>
         &lt;partition_action>create&lt;/partition_action>
         &lt;partition_number>1&lt;/partition_number>
         &lt;partition_start_sector>200&lt;/partition_start_sector>
         &lt;partition_size>20480&lt;/partition_size>
         &lt;partition_type>191&lt;/partition_type>
     &lt;/ai_device_partitioning>
     &lt;ai_device_vtoc_slices>
         &lt;slice_action>create&lt;/slice_action>
         &lt;slice_number>4&lt;/slice_number>
         &lt;slice_size>20480&lt;/slice_size>
     &lt;/ai_device_vtoc_slices>
     &lt;ai_pkg_repo_default_authority>
         &lt;main url="http://pkg.opensolaris.org" authname="opensolaris.org"/>
     &lt;/ai_pkg_repo_default_authority>
     &lt;ai_packages>
         &lt;package_name>SUNWcsd&lt;/package_name>
     &lt;/ai_packages>
     &lt;ai_packages>
         &lt;package_name>SUNWcs&lt;/package_name>
     &lt;/ai_packages>
     &lt;ai_packages>
         &lt;package_name>slim_install&lt;/package_name>
     &lt;/ai_packages>
&lt;/ai_manifest></pre><p>In the example above, all available fields are defined. The following summary explains
the field specifications that are used in this example.</p><h6>Table&nbsp;3-3 AI Manifest Parameter Specifications</h6><table><col width="27%"><col width="72%"><tr><th align="left" valign="top" scope="column"><p>Parameter</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ai_target_device</tt></p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>The <tt>ai_target_device</tt> parameter defines the disk where the installation is performed.</p><p>You can define the <tt>target_device_name</tt>. Or, you can define one or more of the following fields:</p>
<ul><li><p><tt>target_device_type</tt></p></li>
<li><p><tt>target_device_vendor</tt></p></li>
<li><p><tt>target_device_size</tt></p></li></ul>
<p>If you define <tt>target_device_name</tt> and other fields, only <tt>target_device_name</tt> is taken in to consideration. The rest of the parameters are ignored.</p><p>The <tt>target_device_use_solaris_partition</tt> parameter is used to indicate whether the installation should find a disk where the Solaris partition is defined or find a disk where the Solaris partition is not defined.</p><p>These parameters alternatives enable the automated installer to find a disk based on parameters other than name.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ai_device_partitioning</tt></p></td>
<td align="left" valign="top" scope="row"><p>The <tt>ai_device_partitioning</tt> parameters define
the fdisk partition changes to be performed by the automated installer before installing the
OpenSolaris OS. Note the following specifications:</p>
<ul><li><p>The permitted operations for the <tt>partition_action</tt> parameter are <tt>create</tt> and <tt>delete</tt>.</p></li>
<li><p>The automated installer can create a Solaris partition and can delete any partition.</p></li>
<li><p>The parameters, <tt>partition_start_sector</tt> and <tt>partition_size</tt>, should be described as sectors (1 sector = 512 Bytes).</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ai_device_vtoc_slices</tt></p></td>
<td align="left" valign="top" scope="row"><p>The <tt>ai_device_vtoc_slices</tt> parameter defines the Solaris VTOC slice
operations to be performed by the automated installer before installing the OpenSolaris OS.
Note the following specifications:</p>
<ul><li><p>The automated installer can create a Solaris slice, delete a slice, or preserve an existing slice. The permitted operations for the <tt>slice_action</tt> parameter are <tt>create</tt>, <tt>delete</tt>, and <tt>preserved</tt>.</p>
<hr><p><b>Note - </b>The slice 2 defines the entire disk. You cannot create, delete, or preserve slice 2.</p>
<hr>
</li>
<li><p>The parameter, <tt>slice_size is</tt>, is expressed in sectors.</p></li>
<li><p>The <tt>slice_number</tt> is expected to be 0-15.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ai_pkg_repo_</tt></p><p><tt>default_authority</tt></p></td>
<td align="left" valign="top" scope="row"><p>The <tt>ai_pkg_repo_default_authority</tt> parameter specifies the IPS repository to be used
for the installation. The two parameters needed to define the IPS repository are
the URL and the authorization information.</p>
<hr><p><b>Note - </b>If the IPS repository server is running
on a port other than 80, such as 10000, the port information needs
to be provided, in order for the client to reach the repository. For
example, <tt>http://pkgserver:10000</tt> provides the port information.</p>
<hr>
<p>The default URL is <tt>pkg.opensolaris.org</tt> and the
default authority is <tt>opensolaris.org</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ai_packages</tt></p></td>
<td align="left" valign="top" scope="row"><p>The <tt>ai_packages</tt> parameter contains the list of packages you want to
install with the automated installer. In this example, the packages, <tt>SUNWcsd</tt> and
<tt>SUNWcs</tt>, and the cluster, <tt>slim_install</tt>, are specified.</p></td>
</tr>
</table><h6>Example&nbsp;3-2 AI Manifest With Target Disk Name and Repository Defined</h6><pre>&lt;ai_manifest name="example1"> 
    &lt;ai_target_device> 
        &lt;target_device_name>c0t0d0&lt;/target_device_name> 
    &lt;/ai_target_device> 
    &lt;ai_pkg_repo_default_authority> 
        &lt;main url="http://pkg.opensolaris.org" authname="opensolaris.org"/> 
        &lt;/ai_pkg_repo_default_authority> 
    &lt;ai_packages>
    &lt;/ai_packages>
&lt;/ai_manifest></pre><p>For many users a simple configuration, like the example above, is sufficient. Only
the target disk name and the IPS repository with authority is defined. The
automated installer chooses the disk, <tt>c0t0d0</tt>, and performs the installation using the default
set of packages from the <tt>pkg.opensolaris.org</tt> repository.</p><p>If your diskname is different, edit this file, changing <tt>c0t0d0</tt> to your
disk name. The manifest file also accepts an MPXIO name such as
<tt>c0t0000002037CD9F72d0</tt>.</p><p>You can also edit the repository information. If your IPS repository is <tt>pkg.mycompany.com</tt>
and the authorization is <tt>mycompany.com</tt>, change <tt>pkg.opensolaris.org</tt> to <tt>pkg.mycompany.com</tt> and <tt>opensolaris.org</tt> to
<tt>mycompany.com</tt>.</p><h6>Example&nbsp;3-3 AI Manifests Assigned to IP Addresses</h6><pre>&lt;ai_criteria_manifest>
    &lt;ai_criteria name="IPV4">
        &lt;range>
            010006068000
            010006068255
        &lt;/range>
    &lt;/ai_criteria>
    &lt;ai_manifest_file URI="./ai_manifest1.xml"/>
    &lt;sc_manifest_file name="AI" URI="./sc_manifest1.xml"/>
&lt;/ai_criteria_manifest></pre><p>The example above assigns the manifest files, <tt>ai_manifest1</tt> and <tt>sc_manifest1</tt>, to clients
in the IP address range of 10.6.68.0 to 10.6.68.255.</p><h6>Example&nbsp;3-4 AI Manifest With a Target Disk Defined in Terms of Other Parameters</h6><pre>&lt;ai_manifest name="example3"> 
    &lt;ai_target_device> 
        &lt;target_device_type>SCSI&lt;/target_device_type> 
        &lt;target_device_size>20GB&lt;/target_device_type> 
        &lt;target_device_vendor>EMC&lt;/target_device_type> 
    &lt;/ai_target_device> 
    &lt;ai_pkg_repo_default_authority> 
        &lt;main url="http://pkg.opensolaris.org" authname="opensolaris.org"/> 
        &lt;mirror url=""/> 
    &lt;/ai_pkg_repo_default_authority> 
    &lt;ai_packages>
      &lt;package_name> 
            SUNWj6rt 
            SUNWmercurial
      &lt;/package_name> 
    &lt;/ai_packages> 
&lt;/ai_manifest></pre><p>The example above can be used by a client that has an
EMC disk of type SCSI with a size of at least 20 Gbytes.
Two specific packages from the <tt>opensolaris.org</tt> repository, <tt>SUNWj6rt</tt> and <tt>SUNWmercurial</tt>, will be
added to the installed image.</p><h6>Example&nbsp;3-5 AI Manifest With Typical Fields Defined</h6><pre>&lt;ai_manifest name="useful_example">
    &lt;ai_target_device>
        &lt;target_device_name>c0t0d0&lt;/target_device_name> 
    &lt;/ai_target_device>
    &lt;ai_device_partitioning>
        &lt;partition_action>delete&lt;/partition_action>
        &lt;partition_number>2&lt;/partition_number>
        &lt;partition_start_sector>16065000&lt;/partition_start_sector>
        &lt;partition_size>41943040&lt;/partition_size>
        &lt;partition_type>130&lt;/partition_type>
    &lt;/ai_device_partitioning>
    &lt;ai_device_partitioning>
        &lt;partition_action>create&lt;/partition_action>
        &lt;partition_number>2&lt;/partition_number>
        &lt;partition_start_sector>16065000&lt;/partition_start_sector>
        &lt;partition_size>41943040&lt;/partition_size>
        &lt;partition_type>191&lt;/partition_type>
    &lt;/ai_device_partitioning>
    &lt;ai_device_vtoc_slices>
        &lt;slice_action>preserve&lt;/slice_action>
        &lt;slice_number>4&lt;/slice_number>
        &lt;slice_size>20480&lt;/slice_size>
    &lt;/ai_device_vtoc_slices>
    &lt;ai_device_vtoc_slices>
        &lt;slice_action>create&lt;/slice_action>
        &lt;slice_number>0&lt;/slice_number>
        &lt;slice_size>12288&lt;/slice_size>
    &lt;/ai_device_vtoc_slices>
    &lt;ai_pkg_repo_default_authority>
        &lt;main url="http://pkg.opensolaris.org" authname="opensolaris.org"/>
        &lt;mirror url=""/>
    &lt;/ai_pkg_repo_default_authority>
    &lt;ai_packages>
        &lt;package_name>SUNWdhcs&lt;/package_name>
    &lt;/ai_packages>
    &lt;ai_packages>
        &lt;package_name>SUNWdhcm&lt;/package_name>
    &lt;/ai_packages>
    &lt;ai_packages>
        &lt;package_name>SUNWapch22&lt;/package_name>
    &lt;/ai_packages>
    &lt;ai_packages>
        &lt;package_name>SUNWsqlite3&lt;/package_name>
    &lt;/ai_packages>
    &lt;ai_packages>
        &lt;package_name>SUNWpysqlite&lt;/package_name>
    &lt;/ai_packages>
    &lt;ai_packages>
        &lt;package_name>SUNWpython-lxml&lt;/package_name>
    &lt;/ai_packages>
    &lt;ai_packages>
        &lt;package_name>SUNWpython-cherrypy&lt;/package_name>
    &lt;/ai_packages>
    &lt;ai_packages>
        &lt;package_name>SUNWinstalladm-tools&lt;/package_name>
    &lt;/ai_packages>
&lt;/ai_manifest></pre><p>The example above defines a set of parameters that would often be
needed for an automated installation. The following settings are specified.</p>
<ul><li><p>An installation that uses this manifest file uses <tt>c0t0d0</tt> as the target disk.</p></li>
<li><p>The installation deletes the partition 2, type 130 (SUNIXOS). And, the installation will create a partition of type 191 (SUNIXOS2) of the same size and same start sector.</p></li>
<li><p>The installation creates a new VTOC slice at slice 0 and preserves an existing VTOC slice 4.</p></li>
<li><p>The installation gets packages from the IPS repository at <tt>pkg.opensolaris.org</tt>.</p></li>
<li><p>The specific packages listed in the <tt>ai_packages</tt> fields are installed.</p></li></ul>
<p>For a complete summary of the AI manifest fields, see <a href="aimanifest.html">AI Manifest File Parameters</a>.</p>

<a name="customsc"></a><h4>Create Custom SC Manifest Files</h4>
<p>The SC manifest file provides system configuration specifications for the installed image. You
can customize the configuration settings by editing the variable after <tt>value=</tt> for each
of the properties.</p><p>In the following SC manifest example, you could change the user name from
&ldquo;jack&rdquo; to &ldquo;mike&rdquo; in the <tt>username</tt> property.</p><pre>&lt;?xml version='1.0'?> 
&lt;!DOCTYPE service_bundle SYSTEM '/usr/share/lib/xml/dtd/service_bundle.dtd.1'> 
&lt;service_bundle type='profile' name='name'> 

  &lt;service name='ai_properties' version='1' type='service'> 
    &lt;instance name='default' enabled='true'>
      &lt;property_group name='ai' type='application'> 
        &lt;propval name='username' type='astring' value='jack' />        
        &lt;propval name='description' type='astring' value='default_user' /> 
        &lt;propval name='userpass' type='astring' value='jack' />
        &lt;propval name='rootpass' type='astring' value='opensolaris' /> 
        &lt;propval name='timezone' type='astring' value='US/Pacific' /> 
      &lt;/property_group> 
    &lt;/instance> 
  &lt;/service> 
&lt;/service_bundle></pre>

<a name="criteria"></a><h4>Create Custom Criteria Manifest Files</h4>
<p> The criteria manifest file is the bridge that connects the AI
manifest file and the SC manifest file with a client. The administrator uses
the criteria manifest file to add an AI manifest to a service. The
client sends its hardware characteristics to the install service and gets a manifest
file that was assigned by the administrator. See the following examples of criteria
manifest files.</p><h6>Example&nbsp;3-6 Criteria Based on the Client MAC Address</h6><p>The following example assigns <tt>ai_manifest1</tt> and <tt>sc_manifest1</tt> to the client with MAC
address <tt>0:14:4f:20:53:94</tt>. Note that all MAC address pairs are two digits without
colons. Remove the colons from <tt>00:14:4F:20:53:94</tt>, and use <tt>00144F205394</tt>.</p><pre>&lt;ai_criteria_manifest>
    &lt;ai_criteria name="MAC">
        &lt;range>
            00144F205394
            00144F205394
        &lt;/range>
    &lt;/ai_criteria>
    &lt;ai_manifest_file URI="./ai_manifest1.xml"/>
    &lt;sc_manifest_file name="AI" URI="./sc_manifest1.xml"/>
&lt;/ai_criteria_manifest></pre><h6>Example&nbsp;3-7 Criteria Based on the Client IP Address</h6><p>The following example assigns <tt>ai_manifest1</tt> and <tt>sc_manifest1</tt> to the client with IP
address, <tt>10.6.68.127</tt>. For an IP address, each octet between the dots must
be three digits. For the manifest file, take <tt>010.006.068.127</tt> and remove the dots to
use <tt>010006068127</tt>.</p><pre>&lt;ai_criteria_manifest>
    &lt;ai_criteria name="IPV4">
        &lt;range>
            010006068127
            010006068127
        &lt;/range>
    &lt;/ai_criteria>
    &lt;ai_manifest_file URI="./ai_manifest1.xml"/>
    &lt;sc_manifest_file name="AI" URI="./sc_manifest1.xml"/>
&lt;/ai_criteria_manifest></pre><h6>Example&nbsp;3-8 Criteria Based on the Client IP Address Range</h6><p>The following example assigns <tt>ai_manifest1</tt> and <tt>sc_manifest1</tt> to clients in the IP
address range, <tt>10.6.68.0</tt> to <tt>10.6.68.255</tt>.</p><pre>&lt;ai_criteria_manifest>
    &lt;ai_criteria name="IPV4">
        &lt;range>
            010006068000
            010006068255
        &lt;/range>
    &lt;/ai_criteria>
    &lt;ai_manifest_file URI="./ai_manifest1.xml"/>
    &lt;sc_manifest_file name="AI" URI="./sc_manifest1.xml"/>
&lt;/ai_criteria_manifest></pre><h6>Example&nbsp;3-9 Criteria Based on the Client Memory Size</h6><p>The following example assigns <tt>ai_manifest1</tt> and <tt>sc_manifest1</tt> to clients with memory of
at least 2 Gbytes. The None keyword is used to express no bounding
value.</p><pre>&lt;ai_criteria_manifest>
    &lt;ai_criteria name="MEM">
        &lt;range>
            2048
            None
        &lt;/range>
    &lt;/ai_criteria>
    &lt;ai_manifest_file URI="./ai_manifest1.xml"/>
    &lt;sc_manifest_file name="AI" URI="./sc_manifest1.xml"/>
&lt;/ai_criteria_manifest></pre><h6>Example&nbsp;3-10 Criteria Based on the Client Architecture</h6><p>The following example assigns <tt>ai_manifest1</tt> and <tt>sc_manifest1</tt> to clients with an architecture
of <tt>i86pc</tt>.</p><pre>&lt;ai_criteria_manifest>
    &lt;ai_criteria name="ARCH">
        &lt;value>i86pc&lt;/value>
    &lt;/ai_criteria>
    &lt;ai_manifest_file URI="./ai_manifest1.xml"/>
    &lt;sc_manifest_file name="AI" URI="./sc_manifest1.xml"/>
&lt;/ai_criteria_manifest></pre><h6>Example&nbsp;3-11 Criteria Manifest Using Default AI Manifest and Custom SC Manifest</h6><p>In the following example, you have this AI manifest file, <tt>default.xml</tt>.</p><pre>&lt;ai_manifest name="default">
    &lt;ai_target_device>
        &lt;target_device_name>c0t0d0&lt;/target_device_name> 
    &lt;/ai_target_device>
    &lt;ai_device_partitioning>
        &lt;partition_action>create&lt;/partition_action>
        &lt;partition_number>2&lt;/partition_number>
        &lt;partition_start_sector>16065000&lt;/partition_start_sector>
        &lt;partition_size>41943040&lt;/partition_size>
        &lt;partition_type>191&lt;/partition_type>
    &lt;/ai_device_partitioning>
    &lt;ai_device_vtoc_slices>
        &lt;slice_action>create&lt;/slice_action>
        &lt;slice_number>0&lt;/slice_number>
        &lt;slice_size>12288&lt;/slice_size>
    &lt;/ai_device_vtoc_slices>
    &lt;ai_pkg_repo_default_authority>
        &lt;main url="http://pkg.opensolaris.org" authname="opensolaris.org"/>
        &lt;mirror url=""/>
    &lt;/ai_pkg_repo_default_authority>
&lt;/ai_manifest></pre><p>Note that the AI manifest file must be named <tt>default</tt>, or <tt>default.xml</tt>,
as above. Otherwise, you must add criteria to the manifest file. A nondefault
AI manifest file requires criteria.</p><p>In this example, you also have a custom SC manifest file, <tt>sc_manifest1.xml</tt>.</p><pre>&lt;?xml version='1.0'?> 
&lt;!DOCTYPE service_bundle SYSTEM '/usr/share/lib/xml/dtd/service_bundle.dtd.1'> 
&lt;service_bundle type='profile' name='name'> 

  &lt;service name='ai_properties' version='1' type='service'> 
    &lt;instance name='default' enabled='true'>
      &lt;property_group name='ai' type='application'> 
        &lt;propval name='username' type='astring' value='jack' />        
        &lt;propval name='description' type='astring' value='default_user' /> 
        &lt;propval name='userpass' type='astring' value='jack' />
        &lt;propval name='rootpass' type='astring' value='opensolaris' /> 
        &lt;propval name='timezone' type='astring' value='US/Pacific' /> 
      &lt;/property_group> 
    &lt;/instance> 
  &lt;/service> 
&lt;/service_bundle></pre><p>You can use the following criteria manifest file to specify the <tt>default.xml</tt>
file and the custom <tt>sc_manifest1.xml</tt> file.</p><pre>      &lt;ai_criteria_manifest>
          &lt;ai_manifest_file URI="./default.xml"/>
          &lt;sc_manifest_file name="AI" URI="./sc_manifest1.xml"/>
      &lt;/ai_criteria_manifest></pre><p>Once you have created new, custom manifest files, you can add them
or remove them to install services as described in the next sections.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="enable.html">Previous</a>
             </td>
             <td align="right">
                 <a href="associate.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

